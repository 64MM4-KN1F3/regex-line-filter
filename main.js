/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => RegexLineFilterPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var import_state = require("@codemirror/state");
var import_view = require("@codemirror/view");
var REGEX_HISTORY_LIMIT = 5;
var ACTIVE_FILTER_BODY_CLASS = "regex-filter-active-body";
var DEFAULT_SETTINGS = { hideEmptyLines: true, regexHistory: [] };
var setRegexEffect = import_state.StateEffect.define();
var toggleFilterEffect = import_state.StateEffect.define();
var setHideEmptyLinesEffect = import_state.StateEffect.define();
var filterViewPlugin = import_view.ViewPlugin.fromClass(
  class {
    constructor(view) {
      this.decorations = this.buildDecorations(view);
    }
    update(update) {
      if (update.docChanged || update.viewportChanged || update.state.field(filterStateField) !== update.startState.field(filterStateField)) {
        this.decorations = this.buildDecorations(update.view);
      }
    }
    buildDecorations(view) {
      const builder = new import_state.RangeSetBuilder();
      const { regex, enabled, hideEmptyLines } = view.state.field(filterStateField);
      if (!enabled || !regex) {
        return builder.finish();
      }
      const doc = view.state.doc;
      try {
        for (let i = 1; i <= doc.lines; i++) {
          const line = doc.line(i);
          const lineText = line == null ? void 0 : line.text;
          if (typeof lineText !== "string") {
            continue;
          }
          const isEmpty = lineText.trim().length === 0;
          let shouldHide = false;
          let matchesRegex = regex.test(lineText);
          if (!matchesRegex) {
            shouldHide = true;
          }
          if (hideEmptyLines && isEmpty) {
            shouldHide = true;
          }
          if (shouldHide) {
            builder.add(line.from, line.from, import_view.Decoration.line({ attributes: { class: "regex-filter-hidden-line" } }));
          }
        }
      } catch (e) {
        console.error("Regex Line Filter: Error during decoration build:", e);
      }
      return builder.finish();
    }
  },
  { decorations: (v) => v.decorations }
);
var filterStateField = import_state.StateField.define({
  create(state) {
    return { regex: null, enabled: false, hideEmptyLines: DEFAULT_SETTINGS.hideEmptyLines };
  },
  update(value, tr) {
    let newValue = { ...value };
    for (let effect of tr.effects) {
      if (effect.is(setRegexEffect)) {
        newValue.regex = effect.value;
        newValue.enabled = !!effect.value;
      }
      if (effect.is(toggleFilterEffect)) {
        newValue.enabled = effect.value;
        if (!effect.value) {
          newValue.enabled = false;
        } else if (!newValue.regex) {
          newValue.enabled = false;
          console.warn("Attempted to enable filter without a regex.");
        }
      }
      if (effect.is(setHideEmptyLinesEffect)) {
        newValue.hideEmptyLines = effect.value;
      }
    }
    return newValue;
  }
});
var RegexLineFilterPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.lastRegexStr = null;
    this.cssStyleEl = null;
  }
  async onload() {
    console.log("Loading Regex Line Filter plugin");
    await this.loadSettings();
    this.addCommand({ id: "toggle-regex-filter", name: "Toggle Regex Line Filter", editorCallback: (editor, view) => {
      this.toggleFilter(editor, view);
    } });
    this.addSettingTab(new RegexLineFilterSettingTab(this.app, this));
    this.registerEditorExtension([filterStateField, filterViewPlugin]);
    this.addCss();
    this.app.workspace.onLayoutReady(() => {
      this.dispatchSettingToEditors(this.settings.hideEmptyLines);
    });
  }
  onunload() {
    console.log("Unloading Regex Line Filter plugin");
    this.removeCss();
    this.app.workspace.iterateCodeMirrors((cm) => {
      try {
        const currentFilterState = cm.state.field(filterStateField, false);
        if (currentFilterState == null ? void 0 : currentFilterState.enabled) {
          cm.dispatch({ effects: toggleFilterEffect.of(false) });
        }
      } catch (e) {
      }
    });
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    if (!Array.isArray(this.settings.regexHistory)) {
      this.settings.regexHistory = [];
    }
    this.settings.regexHistory = this.settings.regexHistory.slice(0, REGEX_HISTORY_LIMIT);
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  updateRegexHistory(newRegexString) {
    const filteredHistory = this.settings.regexHistory.filter((r) => r !== newRegexString);
    const updatedHistory = [newRegexString, ...filteredHistory];
    this.settings.regexHistory = updatedHistory.slice(0, REGEX_HISTORY_LIMIT);
    this.saveSettings();
  }
  dispatchSettingToEditors(newValue) {
    this.app.workspace.iterateCodeMirrors((cm) => {
      try {
        if (cm.state.field(filterStateField, false) !== void 0) {
          cm.dispatch({ effects: setHideEmptyLinesEffect.of(newValue) });
        }
      } catch (e) {
        console.warn("Regex Line Filter: Error dispatching setting", e);
      }
    });
  }
  // ----- Add CSS including the body class rule -----
  addCss() {
    if (document.getElementById("regex-filter-styles"))
      return;
    const css = `
            /* Rule to hide non-matching lines */
            .regex-filter-hidden-line {
                display: none !important;
            }

            /* Rule to style the active view when filter is on */
            body.${ACTIVE_FILTER_BODY_CLASS} .workspace-leaf.mod-active .view-content {
                /* Inset box shadow to darken edges */
                box-shadow: inset 0 0 0 70px rgba(0, 0, 0, 0.15); /* Adjust size/color/opacity */

                /* Alternatively, adjust padding and background */
                /* padding: 30px !important; */
                /* background-color: var(--background-secondary) !important; */

                transition: box-shadow 0.3s ease-out-in; /* Optional smooth transition */
            }

            /* Ensure padding doesn't affect CodeMirror gutter/line numbers if using padding approach */
            /* body.${ACTIVE_FILTER_BODY_CLASS} .workspace-leaf.mod-active .cm-editor { padding: 0 !important; } */
        `;
    this.cssStyleEl = document.createElement("style");
    this.cssStyleEl.id = "regex-line-filter-styles";
    this.cssStyleEl.textContent = css;
    document.head.appendChild(this.cssStyleEl);
  }
  // ----- End addCss -----
  // ----- removeCss now also removes body class -----
  removeCss() {
    if (this.cssStyleEl) {
      this.cssStyleEl.remove();
      this.cssStyleEl = null;
    }
    const existingStyle = document.getElementById("regex-line-filter-styles");
    if (existingStyle) {
      existingStyle.remove();
    }
    document.body.classList.remove(ACTIVE_FILTER_BODY_CLASS);
  }
  // ----- End removeCss -----
  // ----- toggleFilter manages body class -----
  toggleFilter(editor, view) {
    const cm = editor.cm;
    if (!cm || !(cm instanceof import_view.EditorView)) {
      new import_obsidian.Notice("Regex filter only works in Live Preview or Source Mode.");
      return;
    }
    const currentFilterState = cm.state.field(filterStateField, false);
    if (currentFilterState === void 0) {
      new import_obsidian.Notice("Filter not ready. Please try toggling again.");
      return;
    }
    if (currentFilterState.enabled) {
      cm.dispatch({ effects: toggleFilterEffect.of(false) });
      document.body.classList.remove(ACTIVE_FILTER_BODY_CLASS);
      new import_obsidian.Notice("Regex filter disabled.");
    } else {
      this.promptForRegex(cm);
    }
  }
  // ----- End toggleFilter -----
  // ----- promptForRegex manages body class -----
  promptForRegex(cm) {
    var _a, _b;
    const prefillValue = (_b = (_a = this.lastRegexStr) != null ? _a : this.settings.regexHistory[0]) != null ? _b : "";
    new RegexInputModal(this.app, prefillValue, this.settings.regexHistory, (result) => {
      if (result) {
        try {
          const regex = new RegExp(result, "u");
          this.lastRegexStr = result;
          this.updateRegexHistory(result);
          cm.dispatch({ effects: [setRegexEffect.of(regex)] });
          document.body.classList.add(ACTIVE_FILTER_BODY_CLASS);
          new import_obsidian.Notice(`Regex filter enabled: /${result}/u`);
        } catch (e) {
          const errorMessage = e instanceof Error ? e.message : String(e);
          new import_obsidian.Notice(`Invalid Regex: ${errorMessage}`);
          console.error("Regex Compile Error:", e);
          document.body.classList.remove(ACTIVE_FILTER_BODY_CLASS);
          try {
            cm.dispatch({ effects: toggleFilterEffect.of(false) });
          } catch (e2) {
          }
        }
      } else {
        new import_obsidian.Notice("Regex filter cancelled.");
        document.body.classList.remove(ACTIVE_FILTER_BODY_CLASS);
        try {
          cm.dispatch({ effects: toggleFilterEffect.of(false) });
        } catch (e) {
        }
      }
    }).open();
  }
  // ----- End promptForRegex -----
};
var RegexLineFilterSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Regex Line Filter Settings" });
    new import_obsidian.Setting(containerEl).setName("Hide empty lines").setDesc("When the filter is active, also hide lines that contain only whitespace.").addToggle((toggle) => toggle.setValue(this.plugin.settings.hideEmptyLines).onChange(async (value) => {
      this.plugin.settings.hideEmptyLines = value;
      await this.plugin.saveSettings();
      this.plugin.dispatchSettingToEditors(value);
    }));
  }
};
var RegexInputModal = class extends import_obsidian.Modal {
  constructor(app, initialValue, history, onSubmit) {
    super(app);
    this.textInputEl = null;
    this.initialValue = initialValue;
    this.history = history;
    this.onSubmit = onSubmit;
    this.result = initialValue;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Enter Regex Filter" });
    this.inputComponent = new import_obsidian.Setting(contentEl).setName("Regular Expression (supports emoji):").addText((text) => {
      this.textInputEl = text.inputEl;
      text.setValue(this.initialValue).setPlaceholder("e.g., ^\\s*- \\[ \\].*\u{1F4A1}").onChange((value) => {
        this.result = value;
      });
      text.inputEl.focus();
      text.inputEl.select();
      text.inputEl.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !e.shiftKey && !e.ctrlKey && !e.metaKey && !e.altKey) {
          e.preventDefault();
          this.submit();
        }
      });
    });
    this.inputComponent.controlEl.addClass("regex-filter-input-control");
    if (this.history && this.history.length > 0) {
      const historyEl = contentEl.createDiv({ cls: "regex-filter-history-container" });
      historyEl.createSpan({ text: "History:", cls: "regex-filter-history-label" });
      this.history.forEach((histEntry) => {
        const btn = historyEl.createEl("button", { text: `/${histEntry}/`, cls: "regex-filter-history-item", attr: { title: histEntry } });
        btn.addEventListener("click", () => {
          if (this.textInputEl) {
            this.textInputEl.value = histEntry;
            this.result = histEntry;
            this.textInputEl.focus();
          }
        });
      });
    }
    new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Apply Filter").setCta().onClick(() => {
      this.submit();
    })).addButton((btn) => btn.setButtonText("Cancel").onClick(() => {
      this.close();
      this.onSubmit(null);
    }));
  }
  submit() {
    if (this.result && this.result.trim().length > 0) {
      this.close();
      this.onSubmit(this.result);
    } else if (this.result === "") {
      new import_obsidian.Notice("Regex cannot be empty. Filter cancelled.");
      this.close();
      this.onSubmit(null);
    } else {
      new import_obsidian.Notice("Please enter a regular expression.");
    }
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBlZGl0b3JJbmZvRmllbGQsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRWRpdG9yU3RhdGUsIFN0YXRlRmllbGQsIFN0YXRlRWZmZWN0LCBFeHRlbnNpb24sIFJhbmdlU2V0QnVpbGRlciB9IGZyb20gJ0Bjb2RlbWlycm9yL3N0YXRlJztcbmltcG9ydCB7IERlY29yYXRpb24sIERlY29yYXRpb25TZXQsIEVkaXRvclZpZXcsIFZpZXdQbHVnaW4sIFZpZXdVcGRhdGUsIFdpZGdldFR5cGUgfSBmcm9tICdAY29kZW1pcnJvci92aWV3JztcblxuLy8gLS0tIENvbnN0YW50cyAtLS1cbmNvbnN0IFJFR0VYX0hJU1RPUllfTElNSVQgPSA1O1xuY29uc3QgQUNUSVZFX0ZJTFRFUl9CT0RZX0NMQVNTID0gJ3JlZ2V4LWZpbHRlci1hY3RpdmUtYm9keSc7IC8vIENTUyBDbGFzcyBmb3IgYm9keVxuXG4vLyAtLS0gU2V0dGluZ3MgLS0tXG5pbnRlcmZhY2UgUmVnZXhMaW5lRmlsdGVyU2V0dGluZ3MgeyBoaWRlRW1wdHlMaW5lczogYm9vbGVhbjsgcmVnZXhIaXN0b3J5OiBzdHJpbmdbXTsgfVxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUmVnZXhMaW5lRmlsdGVyU2V0dGluZ3MgPSB7IGhpZGVFbXB0eUxpbmVzOiB0cnVlLCByZWdleEhpc3Rvcnk6IFtdLCB9XG5cbi8vIC0tLSBTdGF0ZSAmIEVmZmVjdHMgLS0tXG5pbnRlcmZhY2UgRmlsdGVyU3RhdGUgeyByZWdleDogUmVnRXhwIHwgbnVsbDsgZW5hYmxlZDogYm9vbGVhbjsgaGlkZUVtcHR5TGluZXM6IGJvb2xlYW47IH1cbmNvbnN0IHNldFJlZ2V4RWZmZWN0ID0gU3RhdGVFZmZlY3QuZGVmaW5lPFJlZ0V4cCB8IG51bGw+KCk7XG5jb25zdCB0b2dnbGVGaWx0ZXJFZmZlY3QgPSBTdGF0ZUVmZmVjdC5kZWZpbmU8Ym9vbGVhbj4oKTtcbmNvbnN0IHNldEhpZGVFbXB0eUxpbmVzRWZmZWN0ID0gU3RhdGVFZmZlY3QuZGVmaW5lPGJvb2xlYW4+KCk7XG5cbi8vIC0tLSBWaWV3UGx1Z2luIGRlZmluaXRpb24gLS0tXG5jb25zdCBmaWx0ZXJWaWV3UGx1Z2luID0gVmlld1BsdWdpbi5mcm9tQ2xhc3MoXG4gICAgY2xhc3Mge1xuICAgICAgICBkZWNvcmF0aW9uczogRGVjb3JhdGlvblNldDtcbiAgICAgICAgY29uc3RydWN0b3IodmlldzogRWRpdG9yVmlldykgeyB0aGlzLmRlY29yYXRpb25zID0gdGhpcy5idWlsZERlY29yYXRpb25zKHZpZXcpOyB9XG4gICAgICAgIHVwZGF0ZSh1cGRhdGU6IFZpZXdVcGRhdGUpIHtcbiAgICAgICAgICAgIGlmICh1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUudmlld3BvcnRDaGFuZ2VkIHx8IHVwZGF0ZS5zdGF0ZS5maWVsZChmaWx0ZXJTdGF0ZUZpZWxkKSAhPT0gdXBkYXRlLnN0YXJ0U3RhdGUuZmllbGQoZmlsdGVyU3RhdGVGaWVsZCkpIHtcbiAgICAgICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuYnVpbGREZWNvcmF0aW9ucyh1cGRhdGUudmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnVpbGREZWNvcmF0aW9ucyh2aWV3OiBFZGl0b3JWaWV3KTogRGVjb3JhdGlvblNldCB7XG4gICAgICAgICAgICBjb25zdCBidWlsZGVyID0gbmV3IFJhbmdlU2V0QnVpbGRlcjxEZWNvcmF0aW9uPigpO1xuICAgICAgICAgICAgY29uc3QgeyByZWdleCwgZW5hYmxlZCwgaGlkZUVtcHR5TGluZXMgfSA9IHZpZXcuc3RhdGUuZmllbGQoZmlsdGVyU3RhdGVGaWVsZCk7XG4gICAgICAgICAgICBpZiAoIWVuYWJsZWQgfHwgIXJlZ2V4KSB7IHJldHVybiBidWlsZGVyLmZpbmlzaCgpOyB9XG4gICAgICAgICAgICBjb25zdCBkb2MgPSB2aWV3LnN0YXRlLmRvYztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gZG9jLmxpbmVzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGRvYy5saW5lKGkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lVGV4dCA9IGxpbmU/LnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGluZVRleHQgIT09ICdzdHJpbmcnKSB7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzRW1wdHkgPSBsaW5lVGV4dC50cmltKCkubGVuZ3RoID09PSAwO1xuICAgICAgICAgICAgICAgICAgICBsZXQgc2hvdWxkSGlkZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlc1JlZ2V4ID0gcmVnZXgudGVzdChsaW5lVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbWF0Y2hlc1JlZ2V4KSB7IHNob3VsZEhpZGUgPSB0cnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChoaWRlRW1wdHlMaW5lcyAmJiBpc0VtcHR5KSB7IHNob3VsZEhpZGUgPSB0cnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRIaWRlKSB7IGJ1aWxkZXIuYWRkKGxpbmUuZnJvbSwgbGluZS5mcm9tLCBEZWNvcmF0aW9uLmxpbmUoeyBhdHRyaWJ1dGVzOiB7IGNsYXNzOiAncmVnZXgtZmlsdGVyLWhpZGRlbi1saW5lJyB9IH0pKTsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihcIlJlZ2V4IExpbmUgRmlsdGVyOiBFcnJvciBkdXJpbmcgZGVjb3JhdGlvbiBidWlsZDpcIiwgZSk7IH1cbiAgICAgICAgICAgIHJldHVybiBidWlsZGVyLmZpbmlzaCgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB7IGRlY29yYXRpb25zOiAodikgPT4gdi5kZWNvcmF0aW9ucywgfVxuKTtcbi8vIC0tLSBFbmQgb2YgVmlld1BsdWdpbiBkZWZpbml0aW9uIC0tLVxuXG5cbi8vIC0tLSBTdGF0ZUZpZWxkIGRlZmluaXRpb24gLS0tXG5jb25zdCBmaWx0ZXJTdGF0ZUZpZWxkID0gU3RhdGVGaWVsZC5kZWZpbmU8RmlsdGVyU3RhdGU+KHtcbiAgICBjcmVhdGUoc3RhdGUpOiBGaWx0ZXJTdGF0ZSB7IHJldHVybiB7IHJlZ2V4OiBudWxsLCBlbmFibGVkOiBmYWxzZSwgaGlkZUVtcHR5TGluZXM6IERFRkFVTFRfU0VUVElOR1MuaGlkZUVtcHR5TGluZXMsIH07IH0sXG4gICAgdXBkYXRlKHZhbHVlLCB0cik6IEZpbHRlclN0YXRlIHsgbGV0IG5ld1ZhbHVlOiBGaWx0ZXJTdGF0ZSA9IHsgLi4udmFsdWUgfTsgZm9yIChsZXQgZWZmZWN0IG9mIHRyLmVmZmVjdHMpIHsgaWYgKGVmZmVjdC5pcyhzZXRSZWdleEVmZmVjdCkpIHsgbmV3VmFsdWUucmVnZXggPSBlZmZlY3QudmFsdWU7IG5ld1ZhbHVlLmVuYWJsZWQgPSAhIWVmZmVjdC52YWx1ZTsgfSBpZiAoZWZmZWN0LmlzKHRvZ2dsZUZpbHRlckVmZmVjdCkpIHsgbmV3VmFsdWUuZW5hYmxlZCA9IGVmZmVjdC52YWx1ZTsgaWYgKCFlZmZlY3QudmFsdWUpIHsgbmV3VmFsdWUuZW5hYmxlZCA9IGZhbHNlOyB9IGVsc2UgaWYgKCFuZXdWYWx1ZS5yZWdleCkgeyBuZXdWYWx1ZS5lbmFibGVkID0gZmFsc2U7IGNvbnNvbGUud2FybihcIkF0dGVtcHRlZCB0byBlbmFibGUgZmlsdGVyIHdpdGhvdXQgYSByZWdleC5cIik7IH0gfSBpZiAoZWZmZWN0LmlzKHNldEhpZGVFbXB0eUxpbmVzRWZmZWN0KSkgeyBuZXdWYWx1ZS5oaWRlRW1wdHlMaW5lcyA9IGVmZmVjdC52YWx1ZTsgfSB9IHJldHVybiBuZXdWYWx1ZTsgfVxufSk7XG5cbi8vIC0tLSBQbHVnaW4gQ2xhc3MgZGVmaW5pdGlvbiAtLS1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlZ2V4TGluZUZpbHRlclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IFJlZ2V4TGluZUZpbHRlclNldHRpbmdzOyBsYXN0UmVnZXhTdHI6IHN0cmluZyB8IG51bGwgPSBudWxsOyBjc3NTdHlsZUVsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIGFzeW5jIG9ubG9hZCgpIHsgY29uc29sZS5sb2coJ0xvYWRpbmcgUmVnZXggTGluZSBGaWx0ZXIgcGx1Z2luJyk7IGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7IHRoaXMuYWRkQ29tbWFuZCh7IGlkOiAndG9nZ2xlLXJlZ2V4LWZpbHRlcicsIG5hbWU6ICdUb2dnbGUgUmVnZXggTGluZSBGaWx0ZXInLCBlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHsgdGhpcy50b2dnbGVGaWx0ZXIoZWRpdG9yLCB2aWV3KTsgfSwgfSk7IHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgUmVnZXhMaW5lRmlsdGVyU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpOyB0aGlzLnJlZ2lzdGVyRWRpdG9yRXh0ZW5zaW9uKFtmaWx0ZXJTdGF0ZUZpZWxkLCBmaWx0ZXJWaWV3UGx1Z2luXSk7IHRoaXMuYWRkQ3NzKCk7IHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHsgdGhpcy5kaXNwYXRjaFNldHRpbmdUb0VkaXRvcnModGhpcy5zZXR0aW5ncy5oaWRlRW1wdHlMaW5lcyk7IH0pOyB9XG4gICAgb251bmxvYWQoKSB7IGNvbnNvbGUubG9nKCdVbmxvYWRpbmcgUmVnZXggTGluZSBGaWx0ZXIgcGx1Z2luJyk7IHRoaXMucmVtb3ZlQ3NzKCk7IC8vIHJlbW92ZUNzcyBub3cgYWxzbyBoYW5kbGVzIGJvZHkgY2xhc3NcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVDb2RlTWlycm9ycyhjbSA9PiB7IHRyeSB7IGNvbnN0IGN1cnJlbnRGaWx0ZXJTdGF0ZSA9IGNtLnN0YXRlLmZpZWxkKGZpbHRlclN0YXRlRmllbGQsIGZhbHNlKTsgaWYgKGN1cnJlbnRGaWx0ZXJTdGF0ZT8uZW5hYmxlZCkgeyBjbS5kaXNwYXRjaCh7IGVmZmVjdHM6IHRvZ2dsZUZpbHRlckVmZmVjdC5vZihmYWxzZSkgfSk7IH0gfSBjYXRjaCAoZSkgeyAvKiBJZ25vcmUgKi8gfSB9KTsgfVxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHsgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7IGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnNldHRpbmdzLnJlZ2V4SGlzdG9yeSkpIHsgdGhpcy5zZXR0aW5ncy5yZWdleEhpc3RvcnkgPSBbXTsgfSB0aGlzLnNldHRpbmdzLnJlZ2V4SGlzdG9yeSA9IHRoaXMuc2V0dGluZ3MucmVnZXhIaXN0b3J5LnNsaWNlKDAsIFJFR0VYX0hJU1RPUllfTElNSVQpOyB9XG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkgeyBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpOyB9XG4gICAgdXBkYXRlUmVnZXhIaXN0b3J5KG5ld1JlZ2V4U3RyaW5nOiBzdHJpbmcpIHsgY29uc3QgZmlsdGVyZWRIaXN0b3J5ID0gdGhpcy5zZXR0aW5ncy5yZWdleEhpc3RvcnkuZmlsdGVyKHIgPT4gciAhPT0gbmV3UmVnZXhTdHJpbmcpOyBjb25zdCB1cGRhdGVkSGlzdG9yeSA9IFtuZXdSZWdleFN0cmluZywgLi4uZmlsdGVyZWRIaXN0b3J5XTsgdGhpcy5zZXR0aW5ncy5yZWdleEhpc3RvcnkgPSB1cGRhdGVkSGlzdG9yeS5zbGljZSgwLCBSRUdFWF9ISVNUT1JZX0xJTUlUKTsgdGhpcy5zYXZlU2V0dGluZ3MoKTsgfVxuICAgIGRpc3BhdGNoU2V0dGluZ1RvRWRpdG9ycyhuZXdWYWx1ZTogYm9vbGVhbikgeyB0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUNvZGVNaXJyb3JzKGNtID0+IHsgdHJ5IHsgaWYgKGNtLnN0YXRlLmZpZWxkKGZpbHRlclN0YXRlRmllbGQsIGZhbHNlKSAhPT0gdW5kZWZpbmVkKSB7IGNtLmRpc3BhdGNoKHsgZWZmZWN0czogc2V0SGlkZUVtcHR5TGluZXNFZmZlY3Qub2YobmV3VmFsdWUpIH0pOyB9IH0gY2F0Y2ggKGUpIHsgY29uc29sZS53YXJuKFwiUmVnZXggTGluZSBGaWx0ZXI6IEVycm9yIGRpc3BhdGNoaW5nIHNldHRpbmdcIiwgZSk7IH0gfSk7IH1cblxuICAgIC8vIC0tLS0tIEFkZCBDU1MgaW5jbHVkaW5nIHRoZSBib2R5IGNsYXNzIHJ1bGUgLS0tLS1cbiAgICBhZGRDc3MoKSB7XG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVnZXgtZmlsdGVyLXN0eWxlcycpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGNzcyA9IGBcbiAgICAgICAgICAgIC8qIFJ1bGUgdG8gaGlkZSBub24tbWF0Y2hpbmcgbGluZXMgKi9cbiAgICAgICAgICAgIC5yZWdleC1maWx0ZXItaGlkZGVuLWxpbmUge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogUnVsZSB0byBzdHlsZSB0aGUgYWN0aXZlIHZpZXcgd2hlbiBmaWx0ZXIgaXMgb24gKi9cbiAgICAgICAgICAgIGJvZHkuJHtBQ1RJVkVfRklMVEVSX0JPRFlfQ0xBU1N9IC53b3Jrc3BhY2UtbGVhZi5tb2QtYWN0aXZlIC52aWV3LWNvbnRlbnQge1xuICAgICAgICAgICAgICAgIC8qIEluc2V0IGJveCBzaGFkb3cgdG8gZGFya2VuIGVkZ2VzICovXG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgNzBweCByZ2JhKDAsIDAsIDAsIDAuMTUpOyAvKiBBZGp1c3Qgc2l6ZS9jb2xvci9vcGFjaXR5ICovXG5cbiAgICAgICAgICAgICAgICAvKiBBbHRlcm5hdGl2ZWx5LCBhZGp1c3QgcGFkZGluZyBhbmQgYmFja2dyb3VuZCAqL1xuICAgICAgICAgICAgICAgIC8qIHBhZGRpbmc6IDMwcHggIWltcG9ydGFudDsgKi9cbiAgICAgICAgICAgICAgICAvKiBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSkgIWltcG9ydGFudDsgKi9cblxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGJveC1zaGFkb3cgMC4zcyBlYXNlLW91dC1pbjsgLyogT3B0aW9uYWwgc21vb3RoIHRyYW5zaXRpb24gKi9cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogRW5zdXJlIHBhZGRpbmcgZG9lc24ndCBhZmZlY3QgQ29kZU1pcnJvciBndXR0ZXIvbGluZSBudW1iZXJzIGlmIHVzaW5nIHBhZGRpbmcgYXBwcm9hY2ggKi9cbiAgICAgICAgICAgIC8qIGJvZHkuJHtBQ1RJVkVfRklMVEVSX0JPRFlfQ0xBU1N9IC53b3Jrc3BhY2UtbGVhZi5tb2QtYWN0aXZlIC5jbS1lZGl0b3IgeyBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7IH0gKi9cbiAgICAgICAgYDtcbiAgICAgICAgdGhpcy5jc3NTdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgdGhpcy5jc3NTdHlsZUVsLmlkID0gJ3JlZ2V4LWxpbmUtZmlsdGVyLXN0eWxlcyc7XG4gICAgICAgIHRoaXMuY3NzU3R5bGVFbC50ZXh0Q29udGVudCA9IGNzcztcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLmNzc1N0eWxlRWwpO1xuICAgICB9XG4gICAgLy8gLS0tLS0gRW5kIGFkZENzcyAtLS0tLVxuXG4gICAgLy8gLS0tLS0gcmVtb3ZlQ3NzIG5vdyBhbHNvIHJlbW92ZXMgYm9keSBjbGFzcyAtLS0tLVxuICAgIHJlbW92ZUNzcygpIHtcbiAgICAgICAgIC8vIFJlbW92ZSB0aGUgc3R5bGUgdGFnXG4gICAgICAgICBpZiAodGhpcy5jc3NTdHlsZUVsKSB7IHRoaXMuY3NzU3R5bGVFbC5yZW1vdmUoKTsgdGhpcy5jc3NTdHlsZUVsID0gbnVsbDsgfVxuICAgICAgICAgY29uc3QgZXhpc3RpbmdTdHlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWdleC1saW5lLWZpbHRlci1zdHlsZXMnKTtcbiAgICAgICAgIGlmIChleGlzdGluZ1N0eWxlKSB7IGV4aXN0aW5nU3R5bGUucmVtb3ZlKCk7IH1cbiAgICAgICAgIC8vIFJlbW92ZSB0aGUgYm9keSBjbGFzc1xuICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKEFDVElWRV9GSUxURVJfQk9EWV9DTEFTUyk7XG4gICAgfVxuICAgIC8vIC0tLS0tIEVuZCByZW1vdmVDc3MgLS0tLS1cblxuICAgIC8vIC0tLS0tIHRvZ2dsZUZpbHRlciBtYW5hZ2VzIGJvZHkgY2xhc3MgLS0tLS1cbiAgICB0b2dnbGVGaWx0ZXIoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykge1xuICAgICAgICBjb25zdCBjbSA9IChlZGl0b3IgYXMgYW55KS5jbSBhcyBFZGl0b3JWaWV3O1xuICAgICAgICBpZiAoIWNtIHx8ICEoY20gaW5zdGFuY2VvZiBFZGl0b3JWaWV3KSkgeyBuZXcgTm90aWNlKFwiUmVnZXggZmlsdGVyIG9ubHkgd29ya3MgaW4gTGl2ZSBQcmV2aWV3IG9yIFNvdXJjZSBNb2RlLlwiKTsgcmV0dXJuOyB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRGaWx0ZXJTdGF0ZSA9IGNtLnN0YXRlLmZpZWxkKGZpbHRlclN0YXRlRmllbGQsIGZhbHNlKTtcbiAgICAgICAgaWYoY3VycmVudEZpbHRlclN0YXRlID09PSB1bmRlZmluZWQpIHsgbmV3IE5vdGljZShcIkZpbHRlciBub3QgcmVhZHkuIFBsZWFzZSB0cnkgdG9nZ2xpbmcgYWdhaW4uXCIpOyByZXR1cm47IH1cblxuICAgICAgICBpZiAoY3VycmVudEZpbHRlclN0YXRlLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIC8vIERpc2FibGUgZmlsdGVyXG4gICAgICAgICAgICBjbS5kaXNwYXRjaCh7IGVmZmVjdHM6IHRvZ2dsZUZpbHRlckVmZmVjdC5vZihmYWxzZSkgfSk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoQUNUSVZFX0ZJTFRFUl9CT0RZX0NMQVNTKTsgLy8gUmVtb3ZlIGJvZHkgY2xhc3NcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1JlZ2V4IGZpbHRlciBkaXNhYmxlZC4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEVuYWJsZSBmaWx0ZXIgKHZpYSBwcm9tcHQpXG4gICAgICAgICAgICB0aGlzLnByb21wdEZvclJlZ2V4KGNtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyAtLS0tLSBFbmQgdG9nZ2xlRmlsdGVyIC0tLS0tXG5cbiAgICAvLyAtLS0tLSBwcm9tcHRGb3JSZWdleCBtYW5hZ2VzIGJvZHkgY2xhc3MgLS0tLS1cbiAgICBwcm9tcHRGb3JSZWdleChjbTogRWRpdG9yVmlldykge1xuICAgICAgICBjb25zdCBwcmVmaWxsVmFsdWUgPSB0aGlzLmxhc3RSZWdleFN0ciA/PyB0aGlzLnNldHRpbmdzLnJlZ2V4SGlzdG9yeVswXSA/PyBcIlwiO1xuICAgICAgICBuZXcgUmVnZXhJbnB1dE1vZGFsKHRoaXMuYXBwLCBwcmVmaWxsVmFsdWUsIHRoaXMuc2V0dGluZ3MucmVnZXhIaXN0b3J5LCAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzdWx0KSB7IC8vIFVzZXIgc3VibWl0dGVkIGEgcmVnZXggc3RyaW5nXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKHJlc3VsdCwgJ3UnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0UmVnZXhTdHIgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUmVnZXhIaXN0b3J5KHJlc3VsdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRGlzcGF0Y2ggZWZmZWN0IHRvIHNldCB0aGUgcmVnZXhcbiAgICAgICAgICAgICAgICAgICAgY20uZGlzcGF0Y2goeyBlZmZlY3RzOiBbIHNldFJlZ2V4RWZmZWN0Lm9mKHJlZ2V4KSBdIH0pO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoQUNUSVZFX0ZJTFRFUl9CT0RZX0NMQVNTKTsgLy8gQWRkIGJvZHkgY2xhc3Mgb24gc3VjY2Vzc1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBSZWdleCBmaWx0ZXIgZW5hYmxlZDogLyR7cmVzdWx0fS91YCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyAvLyBJbnZhbGlkIFJlZ2V4XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IChlIGluc3RhbmNlb2YgRXJyb3IpID8gZS5tZXNzYWdlIDogU3RyaW5nKGUpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBJbnZhbGlkIFJlZ2V4OiAke2Vycm9yTWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlJlZ2V4IENvbXBpbGUgRXJyb3I6XCIsIGUpO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoQUNUSVZFX0ZJTFRFUl9CT0RZX0NMQVNTKTsgLy8gRW5zdXJlIGNsYXNzIHJlbW92ZWQgb24gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHsgY20uZGlzcGF0Y2goeyBlZmZlY3RzOiB0b2dnbGVGaWx0ZXJFZmZlY3Qub2YoZmFsc2UpIH0pOyB9IGNhdGNoKGUpIHsgLyogSWdub3JlICovIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBVc2VyIGNhbmNlbGxlZFxuICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdSZWdleCBmaWx0ZXIgY2FuY2VsbGVkLicpO1xuICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoQUNUSVZFX0ZJTFRFUl9CT0RZX0NMQVNTKTsgLy8gRW5zdXJlIGNsYXNzIHJlbW92ZWQgb24gY2FuY2VsXG4gICAgICAgICAgICAgICAgIHRyeSB7IGNtLmRpc3BhdGNoKHsgZWZmZWN0czogdG9nZ2xlRmlsdGVyRWZmZWN0Lm9mKGZhbHNlKSB9KTsgfSBjYXRjaChlKSB7IC8qIElnbm9yZSAqLyB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLm9wZW4oKTtcbiAgICB9XG4gICAgLy8gLS0tLS0gRW5kIHByb21wdEZvclJlZ2V4IC0tLS0tXG5cbn0gLy8gRW5kIG9mIFBsdWdpbiBDbGFzc1xuXG4vLyAtLS0gU2V0dGluZ3MgVGFiIENsYXNzIC0tLVxuY2xhc3MgUmVnZXhMaW5lRmlsdGVyU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IFJlZ2V4TGluZUZpbHRlclBsdWdpbjsgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogUmVnZXhMaW5lRmlsdGVyUGx1Z2luKSB7IHN1cGVyKGFwcCwgcGx1Z2luKTsgdGhpcy5wbHVnaW4gPSBwbHVnaW47IH1cblx0ZGlzcGxheSgpOiB2b2lkIHsgY29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7IGNvbnRhaW5lckVsLmVtcHR5KCk7IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnUmVnZXggTGluZSBGaWx0ZXIgU2V0dGluZ3MnfSk7IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKCdIaWRlIGVtcHR5IGxpbmVzJykuc2V0RGVzYygnV2hlbiB0aGUgZmlsdGVyIGlzIGFjdGl2ZSwgYWxzbyBoaWRlIGxpbmVzIHRoYXQgY29udGFpbiBvbmx5IHdoaXRlc3BhY2UuJykuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUVtcHR5TGluZXMpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlRW1wdHlMaW5lcyA9IHZhbHVlOyBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTsgdGhpcy5wbHVnaW4uZGlzcGF0Y2hTZXR0aW5nVG9FZGl0b3JzKHZhbHVlKTsgfSkpOyB9XG59XG5cbi8vIC0tLSBNb2RhbCBDbGFzcyBkZWZpbml0aW9uIChJbmNsdWRlcyBIaXN0b3J5IERpc3BsYXkpIC0tLVxuY2xhc3MgUmVnZXhJbnB1dE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHJlc3VsdDogc3RyaW5nOyBvblN1Ym1pdDogKHJlc3VsdDogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZDsgaW5pdGlhbFZhbHVlOiBzdHJpbmc7IGhpc3Rvcnk6IHN0cmluZ1tdOyBpbnB1dENvbXBvbmVudDogU2V0dGluZzsgdGV4dElucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaW5pdGlhbFZhbHVlOiBzdHJpbmcsIGhpc3Rvcnk6IHN0cmluZ1tdLCBvblN1Ym1pdDogKHJlc3VsdDogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZCkgeyBzdXBlcihhcHApOyB0aGlzLmluaXRpYWxWYWx1ZSA9IGluaXRpYWxWYWx1ZTsgdGhpcy5oaXN0b3J5ID0gaGlzdG9yeTsgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0OyB0aGlzLnJlc3VsdCA9IGluaXRpYWxWYWx1ZTsgfVxuICAgIG9uT3BlbigpIHsgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7IGNvbnRlbnRFbC5lbXB0eSgpOyBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRW50ZXIgUmVnZXggRmlsdGVyJyB9KTsgdGhpcy5pbnB1dENvbXBvbmVudCA9IG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZSgnUmVndWxhciBFeHByZXNzaW9uIChzdXBwb3J0cyBlbW9qaSk6JykuYWRkVGV4dCgodGV4dCkgPT4geyB0aGlzLnRleHRJbnB1dEVsID0gdGV4dC5pbnB1dEVsOyB0ZXh0LnNldFZhbHVlKHRoaXMuaW5pdGlhbFZhbHVlKS5zZXRQbGFjZWhvbGRlcignZS5nLiwgXlxcXFxzKi0gXFxcXFsgXFxcXF0uKlx1RDgzRFx1RENBMScpLm9uQ2hhbmdlKCh2YWx1ZSkgPT4geyB0aGlzLnJlc3VsdCA9IHZhbHVlOyB9KTsgdGV4dC5pbnB1dEVsLmZvY3VzKCk7IHRleHQuaW5wdXRFbC5zZWxlY3QoKTsgdGV4dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4geyBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkgJiYgIWUuY3RybEtleSAmJiAhZS5tZXRhS2V5ICYmICFlLmFsdEtleSkgeyBlLnByZXZlbnREZWZhdWx0KCk7IHRoaXMuc3VibWl0KCk7IH0gfSk7IH0pOyB0aGlzLmlucHV0Q29tcG9uZW50LmNvbnRyb2xFbC5hZGRDbGFzcygncmVnZXgtZmlsdGVyLWlucHV0LWNvbnRyb2wnKTsgaWYgKHRoaXMuaGlzdG9yeSAmJiB0aGlzLmhpc3RvcnkubGVuZ3RoID4gMCkgeyBjb25zdCBoaXN0b3J5RWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAncmVnZXgtZmlsdGVyLWhpc3RvcnktY29udGFpbmVyJyB9KTsgaGlzdG9yeUVsLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnSGlzdG9yeTonLCBjbHM6ICdyZWdleC1maWx0ZXItaGlzdG9yeS1sYWJlbCcgfSk7IHRoaXMuaGlzdG9yeS5mb3JFYWNoKGhpc3RFbnRyeSA9PiB7IGNvbnN0IGJ0biA9IGhpc3RvcnlFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiBgLyR7aGlzdEVudHJ5fS9gLCBjbHM6ICdyZWdleC1maWx0ZXItaGlzdG9yeS1pdGVtJywgYXR0cjogeyB0aXRsZTogaGlzdEVudHJ5IH0gfSk7IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgaWYgKHRoaXMudGV4dElucHV0RWwpIHsgdGhpcy50ZXh0SW5wdXRFbC52YWx1ZSA9IGhpc3RFbnRyeTsgdGhpcy5yZXN1bHQgPSBoaXN0RW50cnk7IHRoaXMudGV4dElucHV0RWwuZm9jdXMoKTsgfSB9KTsgfSk7IH0gbmV3IFNldHRpbmcoY29udGVudEVsKS5hZGRCdXR0b24oKGJ0bikgPT4gYnRuLnNldEJ1dHRvblRleHQoJ0FwcGx5IEZpbHRlcicpLnNldEN0YSgpLm9uQ2xpY2soKCkgPT4geyB0aGlzLnN1Ym1pdCgpOyB9KSkuYWRkQnV0dG9uKChidG4pID0+IGJ0bi5zZXRCdXR0b25UZXh0KCdDYW5jZWwnKS5vbkNsaWNrKCgpID0+IHsgdGhpcy5jbG9zZSgpOyB0aGlzLm9uU3VibWl0KG51bGwpOyB9KSk7IH1cbiAgICBzdWJtaXQoKSB7IGlmICh0aGlzLnJlc3VsdCAmJiB0aGlzLnJlc3VsdC50cmltKCkubGVuZ3RoID4gMCkgeyB0aGlzLmNsb3NlKCk7IHRoaXMub25TdWJtaXQodGhpcy5yZXN1bHQpOyB9IGVsc2UgaWYgKHRoaXMucmVzdWx0ID09PSBcIlwiKSB7IG5ldyBOb3RpY2UoXCJSZWdleCBjYW5ub3QgYmUgZW1wdHkuIEZpbHRlciBjYW5jZWxsZWQuXCIpOyB0aGlzLmNsb3NlKCk7IHRoaXMub25TdWJtaXQobnVsbCk7IH0gZWxzZSB7IG5ldyBOb3RpY2UoXCJQbGVhc2UgZW50ZXIgYSByZWd1bGFyIGV4cHJlc3Npb24uXCIpOyB9IH1cbiAgICBvbkNsb3NlKCkgeyBsZXQgeyBjb250ZW50RWwgfSA9IHRoaXM7IGNvbnRlbnRFbC5lbXB0eSgpOyB9XG59XG4vLyAtLS0gRW5kIG9mIE1vZGFsIENsYXNzIGRlZmluaXRpb24gLS0tIl0sCiAgIm1hcHBpbmdz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
